<ng-container *ngIf="{ portpholio: portpholio$ | async, coins: coins$ | async } as data">
	<ng-container *ngIf="data.portpholio && data.coins">
		<mat-list>
			<mat-list-item>
				<span matListItemTitle>Name:</span>
				<span matListItemLine>{{ data.portpholio.name }}</span>
			</mat-list-item>
			<mat-list-item>
				<span matListItemTitle>Tax Method:</span>
				<span matListItemLine>{{ data.portpholio.taxMethod }}</span>
			</mat-list-item>
			<mat-list-item>
				<span matListItemTitle>Fiat:</span>
				<span matListItemLine>{{ data.portpholio.fiat }}</span>
			</mat-list-item>
		</mat-list>

		<table mat-table [dataSource]="data.portpholio.wallet" class="mat-elevation-z8">
			<ng-container matColumnDef="id">
				<th mat-header-cell *matHeaderCellDef>Id</th>
				<td mat-cell *matCellDef="let element">{{ element.id }}</td>
				<td mat-footer-cell *matFooterCellDef>Total Profit/Loss</td>
			</ng-container>

			<ng-container matColumnDef="coin">
				<th mat-header-cell *matHeaderCellDef>Coin</th>
				<td mat-cell *matCellDef="let element">
					<img [src]="data.coins.get(element.coin)?.imagePath" [alt]="element.coin" class="table-coin-icon" />

					{{ element.amount }}
				</td>
				<td mat-footer-cell *matFooterCellDef></td>
			</ng-container>

			<ng-container matColumnDef="avcoFiatPerUnit">
				<th mat-header-cell *matHeaderCellDef>Avg. price per coin</th>
				<td mat-cell *matCellDef="let element">
					<img [src]="data.coins.get(data.portpholio.fiat)?.imagePath" [alt]="data.portpholio.fiat" class="table-coin-icon" />

					{{ element.avcoFiatPerUnit }}
				</td>
				<td mat-footer-cell *matFooterCellDef></td>
			</ng-container>

			<ng-container matColumnDef="total">
				<th mat-header-cell *matHeaderCellDef>Price in fiat</th>
				<td mat-cell *matCellDef="let element">
					<img [src]="data.coins.get(data.portpholio.fiat)?.imagePath" [alt]="data.portpholio.fiat" class="table-coin-icon" />

					{{ element.amount * element.avcoFiatPerUnit | number : '1.0-8' }}
				</td>
				<td mat-footer-cell *matFooterCellDef></td>
			</ng-container>

			<ng-container matColumnDef="profit/loss">
				<th mat-header-cell *matHeaderCellDef>Profit/Loss</th>
				<td mat-cell *matCellDef="let element">
					<img [src]="data.coins.get(data.portpholio.fiat)?.imagePath" [alt]="data.portpholio.fiat" class="table-coin-icon" />

					{{ calculateCurrentTotal(element.amount, element.avcoFiatPerUnit, data.coins.get(element.coin)) | number : '1.0-8' }}
				</td>
				<td mat-footer-cell *matFooterCellDef>
					<img [src]="data.coins.get(data.portpholio?.fiat)?.imagePath" [alt]="data.portpholio.fiat" class="table-coin-icon" />

					{{ getTotalProfitLoss(data.portpholio.wallet, data.coins) | number : '1.0-8' }}
				</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
			<tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
		</table>
	</ng-container>
</ng-container>
